
The following diagram has the following steps:

- Slice the Generated manifests: you can use kubectl-slice to slice yaml files generated by Helm and then deploy them to kubernetes.Â 
- Waiting for Rollout: Ultimately you can wait for rolling out to detect which one deployed successfully or not.

<p align="center">
  <img src="pictures/rollout.png?raw=true" />
</p>

you can follow these steps to deploy and wait for rollout of your workloads:

```bash
$ helm template --debug -n ${NAMESPACE} ${PROJECT_NAME} \
  ./helm-chart/ > all_manifests.yaml
$
$ kubectl-slice --input-file=all_manifests.yaml --output-dir=manifests
```

rolling out script:

```bash
#!/bin/bash

cd manifests

KUBERNETES_NAMESPACE=`echo ${CI_PROJECT_NAMESPACE##*/}`

if [ -f deployment* ]
then
  for file in deployment*
  do
      deployment_name=${file#"deployment-"}
      deployment_name=${deployment_name%".yaml"}
      
      kubectl rollout status deployment $deployment_name -n $KUBERNETES_NAMESPACE --timeout=1000s
  done
fi
```
